"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("tslib"),r=require("react"),o=(e=r)&&"object"==typeof e&&"default"in e?e.default:e,n=require("mobx"),i=require("mobx-react-lite"),u=require("lodash"),a=require("lodash/fp");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}var s=function(){function e(e){var t=this;this.touched={},this.errors={},this.setValue=function(e){return function(r){t.values[e]=r}},this.touch=function(e){return t.touched[e]=!0},this.touchAll=function(){return t.keys.forEach((function(e){t.touched[e]=!0}))},this.updateValues=function(e){return Object.assign(t.values,a.pick(t.keys)(e))},this.handleChange=function(e){return function(r){t.setValue(e)(r.target.value)}},this.handleCheckedChange=function(e){return function(r){t.setValue(e)(r.target.checked)}},this.handleBlur=function(e){return function(){t.touch(e)}},this.getValue=function(e){return t.values[e]},this.getError=function(e){return t.errors[e]},this.isRequired=function(e){return t.scheme.fields[e]._exclusive.required},this.handleSubmit=function(e){return function(r){r.preventDefault(),t.touchAll(),t.isValid&&e()}};var r=e.initialValues,o=e.name,i=void 0===o?"":o;this.scheme=e.scheme,this.formName=i,this.keys=Object.keys(r),this.values=r||{},n.autorun((function(){t.keys.forEach((function(e){var r=t.validations[e];r?t.touched[e]&&(t.errors[e]=r):delete t.errors[e]}))}))}var t;return(t=[{key:"validations",get:function(){return function(e,t){try{return e.validateSync(t,{abortEarly:!1,recursive:!0}),{}}catch(e){return e.inner.reduce((function(e,t){var r;return c({},e,((r={})[t.path]=t.errors[0],r))}),{})}}(this.scheme,this.values)}},{key:"isValid",get:function(){return u.isEmpty(this.validations)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}();t.__decorate([n.observable],s.prototype,"values",void 0),t.__decorate([n.observable],s.prototype,"touched",void 0),t.__decorate([n.observable],s.prototype,"errors",void 0),t.__decorate([n.computed],s.prototype,"validations",null),t.__decorate([n.computed],s.prototype,"isValid",null),t.__decorate([n.action],s.prototype,"setValue",void 0),t.__decorate([n.action],s.prototype,"touch",void 0),t.__decorate([n.action],s.prototype,"touchAll",void 0),t.__decorate([n.action],s.prototype,"updateValues",void 0),t.__decorate([n.action],s.prototype,"handleChange",void 0),t.__decorate([n.action],s.prototype,"handleCheckedChange",void 0),t.__decorate([n.action],s.prototype,"handleBlur",void 0),t.__decorate([n.action],s.prototype,"handleSubmit",void 0);var l=o.createContext({}),d=o.createContext({});exports.FieldContextProvider=i.observer((function(e){var t=e.children,n=e.name,i=r.useContext(l),u={name:n,id:i.formName+"_"+n,setValue:i.setValue(n),error:i.getError(n),value:i.getValue(n),onBlur:i.handleBlur(n),onChange:i.handleChange(n),onCheckedChange:i.handleCheckedChange(n),isRequired:i.isRequired(n)};return o.createElement(d.Provider,{value:u},"function"==typeof t?t(u):t)})),exports.FormContextProvider=function(e){return o.createElement(l.Provider,{value:e.formStore},e.children)},exports.useFieldContext=function(){return r.useContext(d)},exports.useForm=function(e){return i.useLocalStore((function(e){return new s(e)}),e)},exports.useFormContext=function(){return r.useContext(l)};
//# sourceMappingURL=mobx-hooks-form.cjs.production.min.js.map
